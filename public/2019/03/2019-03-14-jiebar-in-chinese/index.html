<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>R语言自然语言处理：中文分词 | hoas&#39; blog | One Stupid Boy</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noodp" />
<meta name="Description" content="R语言自然语言处理：中文分词">
<link rel="prev" href="/2019/02/2019-02-21-regular-expression-in-r/" />
<link rel="next" href="/2019/03/2019-03-14-r-crawl-in-web/" />
<link rel="canonical" href="/2019/03/2019-03-14-jiebar-in-chinese/" />
<link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="R语言自然语言处理：中文分词"/>
<meta name="twitter:description" content="R语言自然语言处理：中文分词"/>
<script type="application/ld+json">
    {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "R语言自然语言处理：中文分词",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "\/2019\/03\/2019-03-14-jiebar-in-chinese\/"
    },
    
        "image": {
            "@type": "ImageObject",
            "url": "\/cover.png",
            "width":  800 ,
            "height":  600 
        },
    
    "genre": "posts",
    
        "keywords": "R, 中文",
    
    "wordcount":  3441 ,
    "url": "\/2019\/03\/2019-03-14-jiebar-in-chinese\/",
    
        "datePublished": "2019-03-14T00:00:00\x2b00:00",
    
    
        "dateModified": "2019-03-14T18:35:11\x2b08:00",
    
    
        "license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.",
    
    
        "publisher": {
            "@type": "Organization",
            "name": "XXXX",
            "logo": {
            "@type": "ImageObject",
            "url": "\/logo.png",
            "width":  127 ,
            "height":  40 
            }
        },
    
    
    "description": "R语言自然语言处理：中文分词"
    }
    </script>
<link rel="stylesheet" href="/css/style.min.css">
<link rel="stylesheet" href="/css/lib/fontawesome-free/all.min.min.css">

<link rel="stylesheet" href="/css/lib/animate/animate.min.min.css">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    </head>
    <body>
        <script>
            window.isDark = (window.localStorage && window.localStorage.getItem('theme')) === 'dark';
            window.isDark && document.body.classList.add('dark-theme');
        </script>
        <div class="wrapper">
            <nav class="navbar">
    <div class="navbar-container">
        <div class="navbar-header">
            <a href="/">hoas&#39; blog | One Stupid Boy</a>
        </div>
        <div class="navbar-menu">
            
            
                <a class="menu-item" href="/posts/" title="">文章</a>
            
                <a class="menu-item" href="/tags/" title="">标签</a>
            
                <a class="menu-item" href="/categories/" title="">目录</a>
            
                <a class="menu-item" href="/about/" title="">关于</a>
            
            <a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw"></i></a>
        </div>
    </div>
</nav>
<nav class="navbar-mobile">
     <div class="navbar-container">
        <div class="navbar-header">
            <div><a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw"></i></a><a href="/">hoas&#39; blog | One Stupid Boy</a></div>
            <div class="menu-toggle" id="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="navbar-menu" id="mobile-menu">
            
            
                <a class="menu-item" href="/posts/" title="">文章</a>
            
                <a class="menu-item" href="/tags/" title="">标签</a>
            
                <a class="menu-item" href="/categories/" title="">目录</a>
            
                <a class="menu-item" href="/about/" title="">关于</a>
            
        </div>
    </div>
</nav><main class="main">
                <div class="container">
                    
    
    
    
       
    

    <article class="post-warp">
        <h1 class="post-title animated flipInX">R语言自然语言处理：中文分词</h1>

        <div class="post-meta">
            <div class="post-meta-main">
                <a class="author" href="/" rel="author"><i class="fas fa-user-circle fa-fw"></i>hoas&nbsp;</a>
                <span class="post-category">
                        收录于
                        <i class="far fa-folder fa-fw"></i><a href="/categories/fragmentray/">fragmentray</a>
                            
                    </span>
            </div>
            <div class="post-meta-other">
                <i class="far fa-calendar-alt fa-fw"></i><time datetime=2019-03-14>2019-03-14</time>&nbsp;
                <i class="fas fa-pencil-alt fa-fw"></i>约 3441 字&nbsp;
                <i class="far fa-clock fa-fw"></i>预计阅读 7 分钟&nbsp;</div>
        </div>

        

        <div class="post-toc" id="post-toc">
                <h2 class="post-toc-title">目录</h2>
                <div class="post-toc-content always-active">
                    <nav id="TableOfContents">
<ul>
<li><a href="#简单分词">简单分词</a></li>
<li><a href="#词性标注">词性标注</a>
<ul>
<li><a href="#实践">实践</a>
<ul>
<li><a href="#无分词处理">无分词处理</a></li>
<li><a href="#分词处理">分词处理</a></li>
</ul></li>
<li><a href="#命名实体识别">命名实体识别</a></li>
</ul></li>
<li><a href="#更多">更多</a></li>
</ul>
</nav>
                </div>
            </div>
            <div class="post-toc-mobile" id="post-toc-mobile">
                <details>
                    <summary><div class="post-toc-title"><span>目录</span><span><i class="details icon fas fa-angle-down"></i></span></div></summary>
                    <div class="post-toc-content">
                        
                        
                        <nav id="TableOfContentsMobile">
<ul>
<li><a href="#简单分词">简单分词</a></li>
<li><a href="#词性标注">词性标注</a>
<ul>
<li><a href="#实践">实践</a>
<ul>
<li><a href="#无分词处理">无分词处理</a></li>
<li><a href="#分词处理">分词处理</a></li>
</ul></li>
<li><a href="#命名实体识别">命名实体识别</a></li>
</ul></li>
<li><a href="#更多">更多</a></li>
</ul>
</nav>
                    </div>
                </details>
            </div>

        <div class="post-content">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p><figure><img src=/images/loading.svg data-sizes=auto data-src=https://i.ytimg.com/vi/fOvTtapxa9c/maxresdefault.jpg alt=NPL class=lazyload><figcaption class=image-caption>NPL</figcaption></figure></p>

<p>觉得这个配上词云会很好玩，因为看过<a href="https://mp.weixin.qq.com/s/GREbllksFWlC8jdEiJmlkg">很多篇</a>有趣的分词+词云的操作了，让我也试一试！</p>

<p>这个时候发现我把自己写了比较长时间的<code>crawl.R</code> remove 了……真的是看不懂我自己的操作，如果想写又得再来一遍，我再一次用自己的“实力”证明了这个公式：</p>

<blockquote>
<p>人笨 + 爱折腾 = 作死</p>
</blockquote>

<a class="post-dummy-target" id="简单分词"></a><h1>简单分词</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="n">library</span><span class="p">(</span><span class="n">pacman</span><span class="p">)</span>
<span class="n">p_load</span><span class="p">(</span><span class="n">jiebaR</span><span class="p">,</span><span class="n">reprex</span><span class="p">)</span>

<span class="n">en</span> <span class="o">=</span> <span class="s">&#34;R is my favorite programming language.&#34;</span>
<span class="n">cn</span> <span class="o">=</span> <span class="s">&#34;我想写一本书，名字叫做《R语言高效数据处理》。&#34;</span>
<span class="n">segment</span><span class="p">(</span><span class="n">en</span><span class="p">,</span><span class="n">worker</span><span class="p">())</span>
<span class="cp">#&gt; [1] &#34;R&#34;           &#34;is&#34;          &#34;my&#34;          &#34;favorite&#34;    &#34;programming&#34;
</span><span class="cp">#&gt; [6] &#34;language&#34;
</span><span class="cp"></span><span class="n">segment</span><span class="p">(</span><span class="n">cn</span><span class="p">,</span><span class="n">worker</span><span class="p">())</span>
<span class="cp">#&gt;  [1] &#34;我&#34;       &#34;想&#34;       &#34;写&#34;       &#34;一&#34;       &#34;本书&#34;     &#34;名字&#34;    
</span><span class="cp">#&gt;  [7] &#34;叫做&#34;     &#34;R语言&#34;    &#34;高效&#34;     &#34;数据处理&#34;
</span><span class="cp"></span><span class="n">show_dictpath</span><span class="p">()</span>
<span class="cp">#&gt; [1] &#34;E:/R-3.5.3/library/jiebaRD/dict&#34;</span></code></pre></td></tr></table>
</div>
</div>
<p><sup>Created on 2019-03-14 by the <a href="https://reprex.tidyverse.org">reprex package</a> (v0.2.1)</sup></p>

<p>这里可以进行很简单的分词操作，<strong>jiebaR</strong>包本来就有一些词典在里面，不过也可以通过上述命令添加。</p>

<p>自定义词典的话看这里：<a href="https://mp.weixin.qq.com/s/H6ZKEZhxBprQk8qinIrPww">https://mp.weixin.qq.com/s/H6ZKEZhxBprQk8qinIrPww</a> 。</p>

<a class="post-dummy-target" id="词性标注"></a><h1>词性标注</h1>

<p>利用R语言来做词性标注，并利用标注来做命名实体识别。首先需要明确词性标注的概念，就是要把中文分词后的每一个词，确定其性质。是名词？动词？还是形容词？如果是名词，是人名、地名还是机构团体名称？对这些词性进行更为细致的标注，有助于我们对信息进行提取（有的时候动词和形容词其实不包含我们感兴趣的信息，但是名词却非常重要）。此外，也有利于我们了解作者的用词习惯（这个时候，名词又不一定重要了，一个人的行文习惯可以体现在他经常用的动词和形容词）。 因为我们是用<strong>jiebaR</strong>来做分词，根据官方文档说明，它的标注是根据北大《人民日报》语料库进行训练的，最后的标准整理为ICTPOS3.0词性标记集，内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="n">n</span> <span class="err">名词</span>
    <span class="n">nr</span> <span class="err">人名</span>
        <span class="n">nr1</span> <span class="err">汉语姓氏</span>
        <span class="n">nr2</span> <span class="err">汉语名字</span>
        <span class="n">nrj</span> <span class="err">日语人名</span>
        <span class="n">nrf</span> <span class="err">音译人名</span>
    <span class="n">ns</span> <span class="err">地名</span>
    　<span class="n">nsf</span> <span class="err">音译地名</span>
    <span class="n">nt</span> <span class="err">机构团体名</span>
    <span class="n">nz</span> <span class="err">其它专名</span>
    <span class="n">nl</span> <span class="err">名词性惯用语</span>
    <span class="n">ng</span> <span class="err">名词性语素</span>

<span class="n">t</span> <span class="err">时间词</span>
　　<span class="n">tg</span> <span class="err">时间词性语素</span>

<span class="n">s</span> <span class="err">处所词</span>

<span class="n">f</span> <span class="err">方位词</span>

<span class="n">v</span> <span class="err">动词</span>
    <span class="n">vd</span> <span class="err">副动词</span>
    <span class="n">vn</span> <span class="err">名动词</span>
    <span class="n">vshi</span> <span class="err">动词“是”</span>
    <span class="n">vyou</span> <span class="err">动词“有”</span>
    <span class="n">vf</span> <span class="err">趋向动词</span>
    <span class="n">vx</span> <span class="err">形式动词</span>
    <span class="n">vi</span> <span class="err">不及物动词（内动词）</span>
    <span class="n">vl</span> <span class="err">动词性惯用语</span>
    <span class="n">vg</span> <span class="err">动词性语素</span>
<span class="n">a</span> <span class="err">形容词</span>
    <span class="n">ad</span> <span class="err">副形词</span>
    <span class="n">an</span> <span class="err">名形词</span>
    <span class="n">ag</span> <span class="err">形容词性语素</span>
    <span class="n">al</span> <span class="err">形容词性惯用语</span>
<span class="n">b</span> <span class="err">区别词</span>
    <span class="n">bl</span> <span class="err">区别词性惯用语</span>
<span class="n">z</span> <span class="err">状态词</span>
<span class="n">r</span> <span class="err">代词</span>
    <span class="n">rr</span> <span class="err">人称代词</span>
    <span class="n">rz</span> <span class="err">指示代词</span>
        <span class="n">rzt</span> <span class="err">时间指示代词</span>
        <span class="n">rzs</span> <span class="err">处所指示代词</span>
        <span class="n">rzv</span> <span class="err">谓词性指示代词</span>
    <span class="n">ry</span> <span class="err">疑问代词</span>
        <span class="n">ryt</span> <span class="err">时间疑问代词</span>
        <span class="n">rys</span> <span class="err">处所疑问代词</span>
        <span class="n">ryv</span> <span class="err">谓词性疑问代词</span>
    <span class="n">rg</span> <span class="err">代词性语素</span>
<span class="n">m</span> <span class="err">数词</span>
    <span class="n">mq</span> <span class="err">数量词</span>
<span class="n">q</span> <span class="err">量词</span>
    <span class="n">qv</span> <span class="err">动量词</span>
    <span class="n">qt</span> <span class="err">时量词</span></code></pre></td></tr></table>
</div>
</div>
<a class="post-dummy-target" id="实践"></a><h2>实践</h2>

<p>我们要做词性标注的输入，既可以是一大段没有经过分词处理字符串，也可以是已经分词完毕的分词结果（也就是字符向量）。我们先介绍第一种情况，就是没有经过分词的大段字符串，要完成分词，然后对每个词都进行词性标注。</p>

<a class="post-dummy-target" id="无分词处理"></a><h3>无分词处理</h3>

<p>我们得到的<code>tag_result</code>实质上是一个带属性的向量，这样其实不是特别好用。因此我要把它变成数据框的格式，方便以后利用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="n">library</span><span class="p">(</span><span class="n">pacman</span><span class="p">)</span>
<span class="n">p_load</span><span class="p">(</span><span class="n">jiebaR</span><span class="p">,</span><span class="n">tidyverse</span><span class="p">)</span>

<span class="n">en</span> <span class="o">=</span> <span class="s">&#34;R is my favorite programming language.&#34;</span>
<span class="n">cn</span> <span class="o">=</span> <span class="s">&#34;我想写一本书，名字叫做《R语言高效数据处理，然后让我的女朋友学习。&#34;</span>

<span class="n">tag_worker</span> <span class="o">=</span> <span class="n">worker</span><span class="p">(</span><span class="n">type</span> <span class="o">=</span> <span class="s">&#34;tag&#34;</span><span class="p">)</span>    <span class="err">#构造分词标注器</span>

<span class="n">tag_result</span> <span class="o">=</span> <span class="n">tagging</span><span class="p">(</span><span class="n">cn</span><span class="p">,</span><span class="n">tag_worker</span><span class="p">)</span>   <span class="err">#进行分词标注</span>

<span class="n">tag_result</span>            <span class="err">#查看结果</span>
<span class="cp">#&gt;          r          v          v          x          n          n 
</span><span class="cp">#&gt;       &#34;我&#34;       &#34;想&#34;       &#34;写&#34;     &#34;一本&#34;       &#34;书&#34;     &#34;名字&#34; 
</span><span class="cp">#&gt;          v        eng          a          n          c          v 
</span><span class="cp">#&gt;     &#34;叫做&#34;    &#34;R语言&#34;     &#34;高效&#34; &#34;数据处理&#34;     &#34;然后&#34;       &#34;让&#34; 
</span><span class="cp">#&gt;          r         uj          n          v 
</span><span class="cp">#&gt;       &#34;我&#34;       &#34;的&#34;   &#34;女朋友&#34;     &#34;学习&#34;
</span><span class="cp"></span>
<span class="n">tag_worker</span>            <span class="err">#查看结果</span><span class="o">+</span><span class="mi">1</span>
<span class="cp">#&gt; Worker Type:  Jieba Segment
</span><span class="cp">#&gt; 
</span><span class="cp">#&gt; Default Method  :  tag
</span><span class="cp">#&gt; Detect Encoding :  TRUE
</span><span class="cp">#&gt; Default Encoding:  UTF-8
</span><span class="cp">#&gt; Keep Symbols    :  FALSE
</span><span class="cp">#&gt; Output Path     :  
</span><span class="cp">#&gt; Write File      :  TRUE
</span><span class="cp">#&gt; By Lines        :  FALSE
</span><span class="cp">#&gt; Max Word Length :  20
</span><span class="cp">#&gt; Max Read Lines  :  1e+05
</span><span class="cp">#&gt; 
</span><span class="cp">#&gt; Fixed Model Components:  
</span><span class="cp">#&gt; 
</span><span class="cp">#&gt; $dict
</span><span class="cp">#&gt; [1] &#34;E:/R-3.5.3/library/jiebaRD/dict/jieba.dict.utf8&#34;
</span><span class="cp">#&gt; 
</span><span class="cp">#&gt; $user
</span><span class="cp">#&gt; [1] &#34;E:/R-3.5.3/library/jiebaRD/dict/user.dict.utf8&#34;
</span><span class="cp">#&gt; 
</span><span class="cp">#&gt; $hmm
</span><span class="cp">#&gt; [1] &#34;E:/R-3.5.3/library/jiebaRD/dict/hmm_model.utf8&#34;
</span><span class="cp">#&gt; 
</span><span class="cp">#&gt; $stop_word
</span><span class="cp">#&gt; NULL
</span><span class="cp">#&gt; 
</span><span class="cp">#&gt; $user_weight
</span><span class="cp">#&gt; [1] &#34;max&#34;
</span><span class="cp">#&gt; 
</span><span class="cp">#&gt; $timestamp
</span><span class="cp">#&gt; [1] 1552566498
</span><span class="cp">#&gt; 
</span><span class="cp">#&gt; $default $detect $encoding $symbol $output $write $lines $bylines can be reset.
</span><span class="cp"></span>
<span class="n">str</span><span class="p">(</span><span class="n">tag_result</span><span class="p">)</span>  <span class="err">#查看数据类型</span>
<span class="cp">#&gt;  Named chr [1:16] &#34;我&#34; &#34;想&#34; &#34;写&#34; &#34;一本&#34; &#34;书&#34; &#34;名字&#34; &#34;叫做&#34; &#34;R语言&#34; ...
</span><span class="cp">#&gt;  - attr(*, &#34;names&#34;)= chr [1:16] &#34;r&#34; &#34;v&#34; &#34;v&#34; &#34;x&#34; ...
</span><span class="cp"></span>
<span class="n">enframe</span><span class="p">(</span><span class="n">tag_result</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">tag_table</span>  <span class="err">#转换数据存储格式</span>

<span class="n">tag_table</span>
<span class="cp">#&gt; # A tibble: 16 x 2
</span><span class="cp">#&gt;    name  value   
</span><span class="cp">#&gt;    &lt;chr&gt; &lt;chr&gt;   
</span><span class="cp">#&gt;  1 r     我      
</span><span class="cp">#&gt;  2 v     想      
</span><span class="cp">#&gt;  3 v     写      
</span><span class="cp">#&gt;  4 x     一本    
</span><span class="cp">#&gt;  5 n     书      
</span><span class="cp">#&gt;  6 n     名字    
</span><span class="cp">#&gt;  7 v     叫做    
</span><span class="cp">#&gt;  8 eng   R语言   
</span><span class="cp">#&gt;  9 a     高效    
</span><span class="cp">#&gt; 10 n     数据处理
</span><span class="cp">#&gt; 11 c     然后    
</span><span class="cp">#&gt; 12 v     让      
</span><span class="cp">#&gt; 13 r     我      
</span><span class="cp">#&gt; 14 uj    的      
</span><span class="cp">#&gt; 15 n     女朋友  
</span><span class="cp">#&gt; 16 v     学习</span></code></pre></td></tr></table>
</div>
</div>
<p><sup>Created on 2019-03-14 by the <a href="https://reprex.tidyverse.org">reprex package</a> (v0.2.1)</sup></p>

<a class="post-dummy-target" id="分词处理"></a><h3>分词处理</h3>

<p>结果和上面一样。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="n">library</span><span class="p">(</span><span class="n">pacman</span><span class="p">)</span>
<span class="n">p_load</span><span class="p">(</span><span class="n">jiebaR</span><span class="p">,</span><span class="n">tidyverse</span><span class="p">)</span>

<span class="n">en</span> <span class="o">=</span> <span class="s">&#34;R is my favorite programming language.&#34;</span>
<span class="n">cn</span> <span class="o">=</span> <span class="s">&#34;我想写一本书，名字叫做《R语言高效数据处理，然后让我的女朋友学习。&#34;</span>


<span class="n">tag_worker</span> <span class="o">=</span> <span class="n">worker</span><span class="p">(</span><span class="n">type</span> <span class="o">=</span> <span class="s">&#34;tag&#34;</span><span class="p">)</span>    <span class="err">#构造分词标注器</span>

<span class="n">tag_result</span> <span class="o">=</span> <span class="n">tagging</span><span class="p">(</span><span class="n">cn</span><span class="p">,</span><span class="n">tag_worker</span><span class="p">)</span>   <span class="err">#进行分词标注</span>

<span class="n">tag_result</span>            <span class="err">#查看结果</span>
<span class="cp">#&gt;          r          v          v          x          n          n 
</span><span class="cp">#&gt;       &#34;我&#34;       &#34;想&#34;       &#34;写&#34;     &#34;一本&#34;       &#34;书&#34;     &#34;名字&#34; 
</span><span class="cp">#&gt;          v        eng          a          n          c          v 
</span><span class="cp">#&gt;     &#34;叫做&#34;    &#34;R语言&#34;     &#34;高效&#34; &#34;数据处理&#34;     &#34;然后&#34;       &#34;让&#34; 
</span><span class="cp">#&gt;          r         uj          n          v 
</span><span class="cp">#&gt;       &#34;我&#34;       &#34;的&#34;   &#34;女朋友&#34;     &#34;学习&#34;
</span><span class="cp"></span>
<span class="n">seg_cn</span> <span class="o">&lt;-</span> <span class="n">segment</span><span class="p">(</span><span class="n">cn</span><span class="p">,</span><span class="n">worker</span><span class="p">())</span>

<span class="n">vector_tag</span><span class="p">(</span><span class="n">seg_cn</span><span class="p">,</span><span class="n">tag_worker</span><span class="p">)</span>
<span class="cp">#&gt;          r          v          v          x          n          n 
</span><span class="cp">#&gt;       &#34;我&#34;       &#34;想&#34;       &#34;写&#34;     &#34;一本&#34;       &#34;书&#34;     &#34;名字&#34; 
</span><span class="cp">#&gt;          v        eng          a          n          c          v 
</span><span class="cp">#&gt;     &#34;叫做&#34;    &#34;R语言&#34;     &#34;高效&#34; &#34;数据处理&#34;     &#34;然后&#34;       &#34;让&#34; 
</span><span class="cp">#&gt;          r         uj          n          v 
</span><span class="cp">#&gt;       &#34;我&#34;       &#34;的&#34;   &#34;女朋友&#34;     &#34;学习&#34;</span></code></pre></td></tr></table>
</div>
</div>
<p><sup>Created on 2019-03-14 by the <a href="https://reprex.tidyverse.org">reprex package</a> (v0.2.1)</sup></p>

<a class="post-dummy-target" id="命名实体识别"></a><h2>命名实体识别</h2>

<p>我们识别罕见的南方周刊上一篇关于炫炫的文章<a href="http://www.nfpeople.com/article/7329">《现场信徒》</a>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="n">library</span><span class="p">(</span><span class="n">pacman</span><span class="p">)</span>
<span class="n">p_load</span><span class="p">(</span><span class="n">jiebaR</span><span class="p">,</span> <span class="n">tidyverse</span><span class="p">,</span><span class="n">wordcloud2</span><span class="p">)</span>

<span class="n">tag_worker</span> <span class="o">&lt;-</span> <span class="n">worker</span><span class="p">(</span><span class="n">type</span> <span class="o">=</span> <span class="s">&#34;tag&#34;</span><span class="p">)</span>
<span class="n">cn</span> <span class="o">&lt;-</span> <span class="s">&#34;林志炫拥有一副为音乐而生的身体。他的上半身几乎每一个器官都能共鸣，上至额窦，下至小腹。闲暇时，这位土木工程专业出身的理工男热衷于与医生讨论“我的身体还有哪里能共鸣”。多年的训练让他对发声部位的操控越发娴熟，在即将举行的“One Take 2.0”巡回演唱会上，他按照器官共鸣顺序排出歌单，希望把《我是歌手》和《歌手》两季难度最高的歌曲集中到两小时一次唱完。这需要缜密规划，才能在唱完最后一个音符时，每个部位刚好使用到极限。任何形式的“加唱”，都会影响演出效果。</span>
<span class="p">...</span>
<span class="err">苦行僧一般的生活，他甘之如饴，也会将其延续下去，直到命运收回他的嗓子。命运什么时候动手呢？考虑到他已不是第一次撞见幸运，他乐观地想，也许明天，也许永远不会。</span><span class="s">&#34;</span>
<span class="n">tagging</span><span class="p">(</span><span class="n">cn</span><span class="p">,</span> <span class="n">tag_worker</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">enframe</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="n">dplyr</span><span class="o">::</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#34;n&#34;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">tag_names</span>

<span class="n">tag_names</span> <span class="o">%&gt;%</span>
  <span class="n">count</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="err">#</span> <span class="err">对名词进行计数</span>
  <span class="n">arrange</span><span class="p">(</span><span class="n">desc</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="err">#</span> <span class="err">降序排列</span>
  <span class="n">wordcloud2</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span> <span class="n">fontFamily</span> <span class="o">=</span> <span class="s">&#34;宋体&#34;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">&#34;random-light&#34;</span><span class="p">,</span> <span class="n">backgroundColor</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">)</span>
<span class="cp">#&gt; # A tibble: 271 x 2
</span><span class="cp">#&gt;    value     n
</span><span class="cp">#&gt;    &lt;chr&gt; &lt;int&gt;
</span><span class="cp">#&gt;  1 音乐     25
</span><span class="cp">#&gt;  2 现场     22
</span><span class="cp">#&gt;  3 歌手     16
</span><span class="cp">#&gt;  4 声音     10
</span><span class="cp">#&gt;  5 专辑     10
</span><span class="cp">#&gt;  6 歌曲      8
</span><span class="cp">#&gt;  7 人        8
</span><span class="cp">#&gt;  8 身体      8
</span><span class="cp">#&gt;  9 时        8
</span><span class="cp">#&gt; 10 唱歌      6
</span><span class="cp">#&gt; # ... with 261 more rows</span></code></pre></td></tr></table>
</div>
</div>
<p><sup>Created on 2019-03-14 by the <a href="https://reprex.tidyverse.org">reprex package</a> (v0.2.1)</sup></p>

<p><figure><img src=/images/loading.svg data-sizes=auto data-src=https://github.com/hoasxyz/mdphotos/raw/master/Terry%20Lin/wc2.png alt= class=lazyload><figcaption class=image-caption></figcaption></figure></p>

<p>实际运用中，想必还是会有很多障碍。大家要记得，在用户自定义词库中，我们是可以给词性进行标注的！也就是我们的词想要识别成什么，我们自己可以说了算。这在垂直领域的运用中，是相当有用的。至于应该如何设置标注，大家可以观察原始词库的格式，然后对文本文件进行修饰。原始文件的位置在哪里？请直接键入<code>DICTPATH</code>，你会找到路径，然后用文本格式来查看这个文件即可。然后按照相应格式，来更改用户词典（同一个文件目录下的<code>user.dict.utf8</code>）。 我<a class="post-dummy-target" id="fnref:n"></a><sup class="footnote-ref"><a href="#fn:n">1</a></sup>还是认为，<strong>算法是不可能超越词库的，多在词库下功夫，算法才能够发挥效用</strong>。应该想方设法构建更加优秀的自定义词库，并进行面向业务的精准标注，才能够在实际应用中获得好的效果。</p>

<a class="post-dummy-target" id="更多"></a><h1>更多</h1>

<p>关键词提取：<a href="https://mp.weixin.qq.com/s/XJk5nEaGENgms-LpkAMjag">https://mp.weixin.qq.com/s/XJk5nEaGENgms-LpkAMjag</a> 。</p>
<div class="footnotes">

<hr />

<ol>
<li><a class="post-dummy-target" id="fn:n"></a><strong>黄天元</strong>，复旦大学博士在读，目前研究涉及文本挖掘、社交网络分析和机器学习等。希望与大家分享学习经验，推广并加深R语言在业界的应用。
 <a class="footnote-return" href="#fnref:n"><sup>[返回]</sup></a></li>
</ol>
</div>
        </div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>本文于 2019-03-14 更新</span>
            </div>
            <div class="post-info-license">
                
            </div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md">
                
                    
                        <span><a class="link-to-markdown" href="/2019/03/2019-03-14-jiebar-in-chinese/index.md" target="_blank">阅读原始文档</a></span>
                    
                
            </div>
            <div class="post-info-share">
                
                    <span></span>
                
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section>
            
                
                    <span class="tag">
                        <a href="/tags/r/"><i class="fas fa-tag fa-fw"></i>R</a>
                    </span>
                
                    <span class="tag">
                        <a href="/tags/%E4%B8%AD%E6%96%87/"><i class="fas fa-tag fa-fw"></i>中文</a>
                    </span>
                
            
        </section>
        <section>
            <span><a href="javascript:window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav">
        
            <a href="/2019/02/2019-02-21-regular-expression-in-r/" class="prev" rel="prev" title="Learning Regular Expression with Stringr"><i class="fas fa-angle-left fa-fw"></i>Learning Regular Expression with Stringr</a>
        
        
            <a href="/2019/03/2019-03-14-r-crawl-in-web/" class="next" rel="next" title="R语言网络爬虫">R语言网络爬虫<i class="fas fa-angle-right fa-fw"></i></a>
        
    </div>
</div>

        <div class="post-comment">
            
            

            
        </div>
    </article></div>
            </main>
            <footer class="footer">
    <div class="copyright">
        <div class="copyright-line">
            由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a>
        </div>
        <div class="copyright-line">
            <i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2018 - 2019</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/">hoas</a></span><span class="license">&nbsp;|&nbsp;<a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
    </div>
    <script>
        (function(u, c) {
         var d = document, t = 'script', o = d.createElement(t),
              s = d.getElementsByTagName(t)[0];
         o.src = u;
         if (c) { o.addEventListener('load', function(e) { c(e); }); }
         s.parentNode.insertBefore(o, s);
        })('//cdn.bootcss.com/pangu/3.3.0/pangu.min.js', function() {
            pangu.spacingPage();
            
        });
    </script>
</footer>


    
    




    
    




    
    





    
    



    
    



    
    





    
    





    
    



    
    





    
    




    
    




    
    



    
    





    
    


<script src="/js/lib/jquery/jquery.slim.min.min.js"></script>
<script src="/js/lib/lazysizes/lazysizes.min.min.js"></script>
<script src="/js/lib/smooth-scroll/smooth-scroll.polyfills.min.min.js"></script><script>window.scroll = new SmoothScroll('[data-scroll]', {speed: 300, speedAsDuration: true});</script>


    
    

    

    

    

    






<script src="/js/blog.min.js"></script>


    
</div>
        <a href="#" class="dynamic-to-top" id="dynamic-to-top" data-scroll><span>&nbsp;</span></a>
    </body>
</html>