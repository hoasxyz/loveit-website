<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>四年一本线差分析 | hoas&#39; blog | One Stupid Boy</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noodp" />
<meta name="Description" content="四年一本线分差分析，用R语言的highcharter包。">
<link rel="prev" href="/2019/01/exploring/" />
<link rel="next" href="/2019/01/2019-01-28-wifi-code-referring/" />
<link rel="canonical" href="/2019/01/oneline4/" />
<link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="四年一本线差分析"/>
<meta name="twitter:description" content="四年一本线分差分析，用R语言的highcharter包。"/>
<script type="application/ld+json">
    {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "四年一本线差分析",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "\/2019\/01\/oneline4\/"
    },
    
        "image": {
            "@type": "ImageObject",
            "url": "\/cover.png",
            "width":  800 ,
            "height":  600 
        },
    
    "genre": "posts",
    
        "keywords": "HTML, RMarkdown, 中文",
    
    "wordcount":  2683 ,
    "url": "\/2019\/01\/oneline4\/",
    
        "datePublished": "2019-01-23T00:00:00\x2b00:00",
    
    
        "dateModified": "2019-01-27T00:00:00\x2b00:00",
    
    
        "license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.",
    
    
        "publisher": {
            "@type": "Organization",
            "name": "XXXX",
            "logo": {
            "@type": "ImageObject",
            "url": "\/logo.png",
            "width":  127 ,
            "height":  40 
            }
        },
    
    
    "description": "四年一本线分差分析，用R语言的highcharter包。"
    }
    </script>
<link rel="stylesheet" href="/css/style.min.css">
<link rel="stylesheet" href="/css/lib/fontawesome-free/all.min.min.css">

<link rel="stylesheet" href="/css/lib/animate/animate.min.min.css">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    </head>
    <body>
        <script>
            window.isDark = (window.localStorage && window.localStorage.getItem('theme')) === 'dark';
            window.isDark && document.body.classList.add('dark-theme');
        </script>
        <div class="wrapper">
            <nav class="navbar">
    <div class="navbar-container">
        <div class="navbar-header">
            <a href="/">hoas&#39; blog | One Stupid Boy</a>
        </div>
        <div class="navbar-menu">
            
            
                <a class="menu-item" href="/posts/" title="">文章</a>
            
                <a class="menu-item" href="/tags/" title="">标签</a>
            
                <a class="menu-item" href="/categories/" title="">目录</a>
            
                <a class="menu-item" href="/about/" title="">关于</a>
            
            <a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw"></i></a>
        </div>
    </div>
</nav>
<nav class="navbar-mobile">
     <div class="navbar-container">
        <div class="navbar-header">
            <div><a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw"></i></a><a href="/">hoas&#39; blog | One Stupid Boy</a></div>
            <div class="menu-toggle" id="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="navbar-menu" id="mobile-menu">
            
            
                <a class="menu-item" href="/posts/" title="">文章</a>
            
                <a class="menu-item" href="/tags/" title="">标签</a>
            
                <a class="menu-item" href="/categories/" title="">目录</a>
            
                <a class="menu-item" href="/about/" title="">关于</a>
            
        </div>
    </div>
</nav><main class="main">
                <div class="container">
                    
    
    
    
       
    

    <article class="post-warp">
        <h1 class="post-title animated flipInX">四年一本线差分析</h1>

        <div class="post-meta">
            <div class="post-meta-main">
                <a class="author" href="/" rel="author"><i class="fas fa-user-circle fa-fw"></i>hoas&nbsp;</a>
                <span class="post-category">
                        收录于
                        <i class="far fa-folder fa-fw"></i><a href="/categories/plain/">plain</a>
                            
                    </span>
            </div>
            <div class="post-meta-other">
                <i class="far fa-calendar-alt fa-fw"></i><time datetime=2019-01-23>2019-01-23</time>&nbsp;
                <i class="fas fa-pencil-alt fa-fw"></i>约 2683 字&nbsp;
                <i class="far fa-clock fa-fw"></i>预计阅读 6 分钟&nbsp;</div>
        </div>

        

        

        <div class="post-content">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p>某日，我正在办公室玩电脑，突然听见高三年级主任李老师的声音——以及朝我而来的脚步声。我知道李老师又要来开我找不到女朋友的玩笑了，但是久经沙场的我依旧镇静自若地玩电脑，直到李老师走到我面前后如获至宝般地对我说道：“你终于回来了啊！”我……</p>

<p>“……这个东西学校计算机老师不会搞，你能不能搞啊？……哎！不是计算机专业的没关系……”</p>

<p><img src="https://pic.36krcnd.com/201802/27112556/l57o5cb4lzuzn7e1.jpg!1200"></p>

<a class="post-dummy-target" id="问题分析"></a><h1>问题分析</h1>

<p><strong>问题</strong>：有往两年的本校学生理科高考成绩，以及两年对应的理科一本线（我们学校只考虑一本线！——李老师），求在百分之八十的概率下，得到一个弱科的分数尺度，弱多少<strong>还能</strong>上线。</p>

<p><strong>解读</strong>：例如，对理综，如果语数外都达到一本线，而总成绩也达到了一本线，根据学生高考数据来估计语文科目相差语文一本线的这个分数的尺度指标。</p>

<p>个人认为这个指标的<strong>缺陷</strong>：没有考虑总成绩距总和一本线的分差。</p>

<a class="post-dummy-target" id="解决方式"></a><h1>解决方式</h1>

<p>解决R语言中文代码错误提示问题：<a href="https://d.cosx.org/d/419665-rmarkdown/5。（然鹅我并没有解决……）">https://d.cosx.org/d/419665-rmarkdown/5。（然鹅我并没有解决……）</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r">line15 <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">113</span><span class="p">,</span><span class="m">91</span><span class="p">,</span><span class="m">117</span><span class="p">,</span><span class="m">195</span><span class="p">)</span>
line16 <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">107</span><span class="p">,</span><span class="m">108</span><span class="p">,</span><span class="m">118</span><span class="p">,</span><span class="m">187</span><span class="p">)</span>
line17 <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">106</span><span class="p">,</span><span class="m">104</span><span class="p">,</span><span class="m">113</span><span class="p">,</span><span class="m">166</span><span class="p">)</span>
line18 <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">107</span><span class="p">,</span><span class="m">110</span><span class="p">,</span><span class="m">116</span><span class="p">,</span><span class="m">186</span><span class="p">)</span>

<span class="c1"># 数据导入以及筛选</span>
grade15 <span class="o">&lt;-</span> read_xls<span class="p">(</span><span class="s">&#34;E:/1R/website/grade15.xls&#34;</span><span class="p">,</span>sheet <span class="o">=</span> <span class="m">1</span><span class="p">,</span>range <span class="o">=</span> <span class="s">&#34;A2:I1124&#34;</span><span class="p">,</span>col_names <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span><span class="o">-</span><span class="p">(</span>年级<span class="o">:</span>班级<span class="p">),</span><span class="o">-</span>班名<span class="p">)</span> <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>总分 <span class="o">&gt;=</span> <span class="kp">sum</span><span class="p">(</span>line15<span class="p">)</span><span class="o">&amp;</span>
                    <span class="o">!</span><span class="p">((</span>语文<span class="o">&gt;=</span>line15<span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>数学<span class="o">&gt;=</span>line15<span class="p">[</span><span class="m">2</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>英语<span class="o">&gt;=</span>line15<span class="p">[</span><span class="m">3</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>理综<span class="o">&gt;=</span>line15<span class="p">[</span><span class="m">4</span><span class="p">])))</span>
  
grade16 <span class="o">&lt;-</span> read_xls<span class="p">(</span><span class="s">&#34;E:/1R/website/grade16.xls&#34;</span><span class="p">,</span>sheet <span class="o">=</span> <span class="m">1</span><span class="p">,</span>range <span class="o">=</span> <span class="s">&#34;C3:H1126&#34;</span><span class="p">,</span>col_names <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>总分 <span class="o">&gt;=</span> <span class="kp">sum</span><span class="p">(</span>line16<span class="p">)</span><span class="o">&amp;</span>
                    <span class="o">!</span><span class="p">((</span>语文<span class="o">&gt;=</span>line16<span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>数学<span class="o">&gt;=</span>line16<span class="p">[</span><span class="m">2</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>英语<span class="o">&gt;=</span>line16<span class="p">[</span><span class="m">3</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>理综<span class="o">&gt;=</span>line16<span class="p">[</span><span class="m">4</span><span class="p">])))</span>

grade17 <span class="o">&lt;-</span> read_xls<span class="p">(</span><span class="s">&#34;E:/1R/website/grade17.xls&#34;</span><span class="p">,</span>sheet <span class="o">=</span> <span class="m">1</span><span class="p">,</span>range <span class="o">=</span> <span class="s">&#34;B1:G1065&#34;</span><span class="p">,</span>col_names <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>理综 <span class="o">&lt;=</span> <span class="m">300</span><span class="p">)</span> <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>总分 <span class="o">&gt;=</span> <span class="kp">sum</span><span class="p">(</span>line17<span class="p">)</span><span class="o">&amp;</span>
                    <span class="o">!</span><span class="p">((</span>语文<span class="o">&gt;=</span>line17<span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>数学<span class="o">&gt;=</span>line17<span class="p">[</span><span class="m">2</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>英语<span class="o">&gt;=</span>line17<span class="p">[</span><span class="m">3</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>理综<span class="o">&gt;=</span>line17<span class="p">[</span><span class="m">4</span><span class="p">])))</span>

grade18 <span class="o">&lt;-</span> read_xls<span class="p">(</span><span class="s">&#34;E:/1R/website/grade18.xls&#34;</span><span class="p">,</span>sheet <span class="o">=</span> <span class="m">1</span><span class="p">,</span>range <span class="o">=</span> <span class="s">&#34;C1:J989&#34;</span><span class="p">,</span>col_names <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span><span class="o">-</span>备注<span class="p">)</span> <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>总分 <span class="o">&gt;=</span> <span class="kp">sum</span><span class="p">(</span>line18<span class="p">)</span><span class="o">&amp;</span>
                    <span class="o">!</span><span class="p">((</span>语文<span class="o">&gt;=</span>line18<span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>数学<span class="o">&gt;=</span>line18<span class="p">[</span><span class="m">2</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>英语<span class="o">&gt;=</span>line18<span class="p">[</span><span class="m">3</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span>理综<span class="o">&gt;=</span>line18<span class="p">[</span><span class="m">4</span><span class="p">])))</span>

<span class="c1"># 各科数据筛选</span>
chinese15 <span class="o">&lt;-</span> grade15 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>语文<span class="o">&lt;</span>line15<span class="p">[</span><span class="m">1</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>语文<span class="p">)</span>
chinese15<span class="o">$</span>语文 <span class="o">&lt;-</span> <span class="kp">as.numeric</span><span class="p">(</span>chinese15<span class="o">$</span>语文<span class="p">)</span>
chinese16 <span class="o">&lt;-</span> grade16 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>语文<span class="o">&lt;</span>line16<span class="p">[</span><span class="m">1</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>语文<span class="p">)</span>
chinese17 <span class="o">&lt;-</span> grade17 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>语文<span class="o">&lt;</span>line17<span class="p">[</span><span class="m">1</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>语文<span class="p">)</span>
chinese18 <span class="o">&lt;-</span> grade18 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>语文<span class="o">&lt;</span>line18<span class="p">[</span><span class="m">1</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>语文<span class="p">)</span>
<span class="kt">c</span> <span class="o">&lt;-</span> <span class="kp">rbind</span><span class="p">(</span>chinese15<span class="p">,</span>chinese16<span class="p">,</span>chinese17<span class="p">,</span>chinese18<span class="p">)</span>
sdc <span class="o">&lt;-</span> <span class="kp">rbind</span><span class="p">(</span><span class="o">-</span>chinese15<span class="o">+</span>line15<span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="o">-</span>chinese16<span class="o">+</span>line16<span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="o">-</span>chinese17<span class="o">+</span>line17<span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="o">-</span>chinese18<span class="o">+</span>line18<span class="p">[</span><span class="m">1</span><span class="p">])</span>

math15 <span class="o">&lt;-</span> grade15 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>数学<span class="o">&lt;</span>line15<span class="p">[</span><span class="m">2</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>数学<span class="p">)</span>
math16 <span class="o">&lt;-</span> grade16 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>数学<span class="o">&lt;</span>line16<span class="p">[</span><span class="m">2</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>数学<span class="p">)</span>
math17 <span class="o">&lt;-</span> grade17 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>数学<span class="o">&lt;</span>line17<span class="p">[</span><span class="m">2</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>数学<span class="p">)</span>
math18 <span class="o">&lt;-</span> grade18 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>数学<span class="o">&lt;</span>line18<span class="p">[</span><span class="m">2</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>数学<span class="p">)</span>
m <span class="o">&lt;-</span> <span class="kp">rbind</span><span class="p">(</span>math15<span class="p">,</span>math16<span class="p">,</span>math17<span class="p">,</span>math18<span class="p">)</span>
sdm <span class="o">&lt;-</span> <span class="kp">rbind</span><span class="p">(</span><span class="o">-</span>math15<span class="o">+</span>line15<span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="o">-</span>math16<span class="o">+</span>line16<span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="o">-</span>math17<span class="o">+</span>line17<span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="o">-</span>math18<span class="o">+</span>line18<span class="p">[</span><span class="m">2</span><span class="p">])</span>

english15 <span class="o">&lt;-</span> grade15 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>英语<span class="o">&lt;</span>line15<span class="p">[</span><span class="m">3</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>英语<span class="p">)</span>
english16 <span class="o">&lt;-</span> grade16 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>英语<span class="o">&lt;</span>line16<span class="p">[</span><span class="m">3</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>英语<span class="p">)</span>
english17 <span class="o">&lt;-</span> grade17 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>英语<span class="o">&lt;</span>line17<span class="p">[</span><span class="m">3</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>英语<span class="p">)</span>
english18 <span class="o">&lt;-</span> grade18 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>英语<span class="o">&lt;</span>line18<span class="p">[</span><span class="m">3</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>英语<span class="p">)</span>
e <span class="o">&lt;-</span> <span class="kp">rbind</span><span class="p">(</span>english15<span class="p">,</span>english16<span class="p">,</span>english17<span class="p">,</span>english18<span class="p">)</span>
sde <span class="o">&lt;-</span> <span class="kp">rbind</span><span class="p">(</span><span class="o">-</span>english15<span class="o">+</span>line15<span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="o">-</span>english16<span class="o">+</span>line16<span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="o">-</span>english17<span class="o">+</span>line17<span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="o">-</span>english18<span class="o">+</span>line18<span class="p">[</span><span class="m">3</span><span class="p">])</span>

science15 <span class="o">&lt;-</span> grade15 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>理综<span class="o">&lt;</span>line15<span class="p">[</span><span class="m">4</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>理综<span class="p">)</span>
science16 <span class="o">&lt;-</span> grade16 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>理综<span class="o">&lt;</span>line16<span class="p">[</span><span class="m">4</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>理综<span class="p">)</span>
science17 <span class="o">&lt;-</span> grade17 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>理综<span class="o">&lt;</span>line17<span class="p">[</span><span class="m">4</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>理综<span class="p">)</span>
science18 <span class="o">&lt;-</span> grade18 <span class="o">%&gt;%</span>
  dplyr<span class="o">::</span>filter<span class="p">(</span>理综<span class="o">&lt;</span>line18<span class="p">[</span><span class="m">4</span><span class="p">])</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>理综<span class="p">)</span>
s <span class="o">&lt;-</span> <span class="kp">rbind</span><span class="p">(</span>science15<span class="p">,</span>science16<span class="p">,</span>science17<span class="p">,</span>science18<span class="p">)</span>
sds <span class="o">&lt;-</span> <span class="kp">rbind</span><span class="p">(</span><span class="o">-</span>science15<span class="o">+</span>line15<span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="o">-</span>science16<span class="o">+</span>line16<span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="o">-</span>science17<span class="o">+</span>line17<span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="o">-</span>science18<span class="o">+</span>line18<span class="p">[</span><span class="m">4</span><span class="p">])</span>

<span class="c1"># 分差统计整理、更名</span>
<span class="c1"># This rename function is in plyr package!</span>
cc <span class="o">&lt;-</span> sdc  <span class="o">%&gt;%</span>
  count<span class="p">(</span><span class="s">&#34;语文&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  rename<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&#34;语文&#34;</span> <span class="o">=</span> <span class="s">&#34;分差&#34;</span><span class="p">,</span> <span class="s">&#34;freq&#34;</span> <span class="o">=</span> <span class="s">&#34;语文&#34;</span><span class="p">))</span>
ee <span class="o">&lt;-</span> sde <span class="o">%&gt;%</span>
  count<span class="p">(</span><span class="s">&#34;英语&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  rename<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&#34;英语&#34;</span> <span class="o">=</span> <span class="s">&#34;分差&#34;</span><span class="p">,</span> <span class="s">&#34;freq&#34;</span> <span class="o">=</span> <span class="s">&#34;英语&#34;</span><span class="p">))</span>
mm <span class="o">&lt;-</span> sdm <span class="o">%&gt;%</span>
  count<span class="p">(</span><span class="s">&#34;数学&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  rename<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&#34;数学&#34;</span> <span class="o">=</span> <span class="s">&#34;分差&#34;</span><span class="p">,</span> <span class="s">&#34;freq&#34;</span> <span class="o">=</span> <span class="s">&#34;数学&#34;</span><span class="p">))</span>
ss <span class="o">&lt;-</span> sds <span class="o">%&gt;%</span>
  count<span class="p">(</span><span class="s">&#34;理综&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  rename<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&#34;理综&#34;</span> <span class="o">=</span> <span class="s">&#34;分差&#34;</span><span class="p">,</span> <span class="s">&#34;freq&#34;</span> <span class="o">=</span> <span class="s">&#34;理综&#34;</span><span class="p">))</span>

<span class="c1"># 分差数据合并</span>
intg <span class="o">&lt;-</span> cc <span class="o">%&gt;%</span>
full_join<span class="p">(</span>ee<span class="p">,</span>by <span class="o">=</span> <span class="s">&#34;分差&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  full_join<span class="p">(</span>mm<span class="p">,</span>by <span class="o">=</span> <span class="s">&#34;分差&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  full_join<span class="p">(</span>ss<span class="p">,</span>by <span class="o">=</span> <span class="s">&#34;分差&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  arrange<span class="p">(</span>分差<span class="p">)</span>
intg<span class="p">[</span><span class="kp">is.na</span><span class="p">(</span>intg<span class="p">)]</span> <span class="o">&lt;-</span> <span class="m">0</span>
intg <span class="o">&lt;-</span> intg <span class="o">%&gt;%</span>
  melt<span class="p">(</span>id <span class="o">=</span> <span class="s">&#34;分差&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  plyr<span class="o">::</span>rename<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&#34;variable&#34;</span> <span class="o">=</span> <span class="s">&#34;科目&#34;</span><span class="p">,</span> <span class="s">&#34;value&#34;</span> <span class="o">=</span> <span class="s">&#34;人数&#34;</span><span class="p">))</span>

<span class="c1"># 数据可视化以及保存</span>
hc <span class="o">&lt;-</span> hchart<span class="p">(</span>intg<span class="p">,</span><span class="s">&#34;column&#34;</span><span class="p">,</span>hcaes<span class="p">(</span>x <span class="o">=</span> <span class="s">&#34;分差&#34;</span><span class="p">,</span> y <span class="o">=</span> <span class="s">&#34;人数&#34;</span><span class="p">,</span> group <span class="o">=</span> <span class="s">&#34;科目&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>
  hc_plotOptions<span class="p">(</span>column<span class="o">=</span> <span class="kt">list</span><span class="p">(</span>dataLabels <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>enabled <span class="o">=</span><span class="kc">TRUE</span><span class="p">)))</span> <span class="o">%&gt;%</span> 
  hc_title<span class="p">(</span>text <span class="o">=</span> <span class="s">&#34;各科一本线分差分析图&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  hc_yAxis<span class="p">(</span>title <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>text <span class="o">=</span> <span class="s">&#34;人数&#34;</span><span class="p">,</span>align <span class="o">=</span> <span class="s">&#34;middle&#34;</span><span class="p">),</span>
           tickInterval <span class="o">=</span> <span class="m">4</span><span class="p">,</span>tickAmount <span class="o">=</span> <span class="m">4</span><span class="p">)</span>
hc
htmlwidgets<span class="o">::</span>saveWidget<span class="p">(</span>hc<span class="p">,</span>file <span class="o">=</span> <span class="s">&#34;oneline4.html&#34;</span><span class="p">,</span> selfcontained <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<p>然后再运行下面一行就出来啦！！！</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">iframe</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://rawcdn.githack.com/hoasxyz/MarkdownPhotos/980f8ca0b5aae6907a163da4aa558e7024a7db54/HtmlWidget/oneline4.html&#34;</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;100%&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;600px&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">iframe</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<iframe src="https://rawcdn.githack.com/hoasxyz/MarkdownPhotos/980f8ca0b5aae6907a163da4aa558e7024a7db54/HtmlWidget/oneline4.html" width="100%" height="600px"></iframe>

<p>现在应该可以看到了，如果这里实在看不到图我也没办法了，因为我自己不懂JavaScript，只能移步我的<a href="http://rpubs.com/Hoas_xyz/">RPubs</a>：<a href="http://rpubs.com/Hoas_xyz/oneline。">http://rpubs.com/Hoas_xyz/oneline。</a></p>

<a class="post-dummy-target" id="数据分析"></a><h1>数据分析</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r">percent <span class="o">&lt;-</span> <span class="m">0.8</span><span class="o">*</span><span class="kt">c</span><span class="p">(</span><span class="kp">length</span><span class="p">(</span><span class="kt">c</span><span class="o">$</span>语文<span class="p">),</span><span class="kp">length</span><span class="p">(</span>m<span class="o">$</span>数学<span class="p">),</span><span class="kp">length</span><span class="p">(</span>e<span class="o">$</span>英语<span class="p">),</span><span class="kp">length</span><span class="p">(</span>s<span class="o">$</span>理综<span class="p">))</span>
<span class="o">&gt;</span> percent
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">435.2</span> <span class="m">280.0</span> <span class="m">302.4</span> <span class="m">152.0</span></code></pre></td></tr></table>
</div>
</div>
<p>由图可知，语文指标大概是7分左右，英语大概是19分左右，数学9分左右，理综在11分左右。
(以上是两年的数据分析。)</p>
        </div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>本文于 2019-01-27 更新</span>
            </div>
            <div class="post-info-license">
                
            </div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md">
                
                    
                        <span><a class="link-to-markdown" href="/2019/01/oneline4/index.md" target="_blank">阅读原始文档</a></span>
                    
                
            </div>
            <div class="post-info-share">
                
                    <span></span>
                
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section>
            
                
                    <span class="tag">
                        <a href="/tags/html/"><i class="fas fa-tag fa-fw"></i>HTML</a>
                    </span>
                
                    <span class="tag">
                        <a href="/tags/rmarkdown/"><i class="fas fa-tag fa-fw"></i>RMarkdown</a>
                    </span>
                
                    <span class="tag">
                        <a href="/tags/%E4%B8%AD%E6%96%87/"><i class="fas fa-tag fa-fw"></i>中文</a>
                    </span>
                
            
        </section>
        <section>
            <span><a href="javascript:window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav">
        
            <a href="/2019/01/exploring/" class="prev" rel="prev" title="Notes"><i class="fas fa-angle-left fa-fw"></i>Notes</a>
        
        
            <a href="/2019/01/2019-01-28-wifi-code-referring/" class="next" rel="next" title="WiFi密码查看方法">WiFi密码查看方法<i class="fas fa-angle-right fa-fw"></i></a>
        
    </div>
</div>

        <div class="post-comment">
            
            

            
        </div>
    </article></div>
            </main>
            <footer class="footer">
    <div class="copyright">
        <div class="copyright-line">
            由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a>
        </div>
        <div class="copyright-line">
            <i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2018 - 2019</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/">hoas</a></span><span class="license">&nbsp;|&nbsp;<a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
    </div>
    <script>
        (function(u, c) {
         var d = document, t = 'script', o = d.createElement(t),
              s = d.getElementsByTagName(t)[0];
         o.src = u;
         if (c) { o.addEventListener('load', function(e) { c(e); }); }
         s.parentNode.insertBefore(o, s);
        })('//cdn.bootcss.com/pangu/3.3.0/pangu.min.js', function() {
            pangu.spacingPage();
            
        });
    </script>
</footer>


    
    




    
    




    
    





    
    



    
    



    
    





    
    





    
    



    
    





    
    




    
    




    
    



    
    





    
    


<script src="/js/lib/jquery/jquery.slim.min.min.js"></script>
<script src="/js/lib/lazysizes/lazysizes.min.min.js"></script>
<script src="/js/lib/smooth-scroll/smooth-scroll.polyfills.min.min.js"></script><script>window.scroll = new SmoothScroll('[data-scroll]', {speed: 300, speedAsDuration: true});</script>


    
    

    

    

    

    






<script src="/js/blog.min.js"></script>


    
</div>
        <a href="#" class="dynamic-to-top" id="dynamic-to-top" data-scroll><span>&nbsp;</span></a>
    </body>
</html>