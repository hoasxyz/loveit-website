<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>R Knowledge Communication | hoas&#39; blog | One Stupid Boy</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noodp" />
<meta name="Description" content="R语言统计之都/SO摘要">
<link rel="prev" href="/2019/01/2019-01-05-ggplot2/" />
<link rel="next" href="/2019/04/2019-04-08-settings-in-word/" />
<link rel="canonical" href="/2019/02/2019-02-12-r-knowledge-points/" />
<link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="R Knowledge Communication"/>
<meta name="twitter:description" content="R语言统计之都/SO摘要"/>
<script type="application/ld+json">
    {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "R Knowledge Communication",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "\/2019\/02\/2019-02-12-r-knowledge-points\/"
    },
    
        "image": {
            "@type": "ImageObject",
            "url": "\/images\/hoas.png",
            "width":  800 ,
            "height":  600 
        },
    
    "genre": "posts",
    
        "keywords": "R, RMarkdown",
    
    "wordcount":  2169 ,
    "url": "\/2019\/02\/2019-02-12-r-knowledge-points\/",
    
        "datePublished": "2019-02-12T00:00:00\x2b00:00",
    
    
        "dateModified": "2020-01-10T21:18:09\x2b08:00",
    
    
        "license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.",
    
    
        "publisher": {
            "@type": "Organization",
            "name": "XXXX",
            "logo": {
            "@type": "ImageObject",
            "url": "\/images\/hoas.png",
            "width":  127 ,
            "height":  40 
            }
        },
    
    
    "description": "R语言统计之都\/SO摘要"
    }
    </script>
<link rel="stylesheet" href="/css/style.min.css">
<link rel="stylesheet" href="/css/lib/fontawesome-free/all.min.min.css">

<link rel="stylesheet" href="/css/lib/animate/animate.min.min.css">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    </head>
    <body>
        <script>
            window.isDark = (window.localStorage && window.localStorage.getItem('theme')) === 'dark';
            window.isDark && document.body.classList.add('dark-theme');
        </script>
        <div class="wrapper">
            <nav class="navbar">
    <div class="navbar-container">
        <div class="navbar-header">
            <a href="/">hoas&#39; blog | One Stupid Boy</a>
        </div>
        <div class="navbar-menu">
            
            
                <a class="menu-item" href="/posts/" title="">文章</a>
            
                <a class="menu-item" href="/tags/" title="">标签</a>
            
                <a class="menu-item" href="/categories/" title="">归档</a>
            
                <a class="menu-item" href="/about/" title="">关于</a>
            
            <a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw"></i></a>
        </div>
    </div>
</nav>
<nav class="navbar-mobile">
     <div class="navbar-container">
        <div class="navbar-header">
            <div><a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw"></i></a><a href="/">hoas&#39; blog | One Stupid Boy</a></div>
            <div class="menu-toggle" id="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="navbar-menu" id="mobile-menu">
            
            
                <a class="menu-item" href="/posts/" title="">文章</a>
            
                <a class="menu-item" href="/tags/" title="">标签</a>
            
                <a class="menu-item" href="/categories/" title="">归档</a>
            
                <a class="menu-item" href="/about/" title="">关于</a>
            
        </div>
    </div>
</nav><main class="main">
                <div class="container">
                    
    
    
    
       
    

    <article class="post-warp">
        <h1 class="post-title animated flipInX">R Knowledge Communication</h1>

        <div class="post-meta">
            <div class="post-meta-main">
                <a class="author" href="/" rel="author"><i class="fas fa-user-circle fa-fw"></i>hoas&nbsp;</a>
                <span class="post-category">
                        收录于
                        <i class="far fa-folder fa-fw"></i>&nbsp;<a href="/categories/notes/">notes</a>
                            
                    </span>
            </div>
            <div class="post-meta-other">
                <i class="far fa-calendar-alt fa-fw"></i><time datetime=2019-02-12>2019-02-12</time>&nbsp;
                <i class="fas fa-pencil-alt fa-fw"></i>约 2169 字&nbsp;
                <i class="far fa-clock fa-fw"></i>预计阅读 5 分钟&nbsp;</div>
        </div>

        

        <div class="post-toc" id="post-toc">
                <h2 class="post-toc-title">目录</h2>
                <div class="post-toc-content always-active">
                    <nav id="TableOfContents">
  <ul>
    <li><a href="#txt文件提取冒号后的数值">txt文件提取冒号后的数值</a></li>
    <li><a href="#提取每一行中的最大数值形成新的一行">提取每一行中的最大数值形成新的一行</a></li>
    <li><a href="#改进for循环">改进for循环</a></li>
    <li><a href="#把符合某项的纯字母多行挑出来">把符合某项的纯字母多行挑出来</a></li>
    <li><a href="#用lubridate包生成像seq函数一样的序列">用lubridate包生成像seq()函数一样的序列</a></li>
    <li><a href="#向量中某值与其相邻n个数的subset">向量中某值与其相邻n个数的subset</a></li>
    <li><a href="#字符和数字比大小">字符和数字比大小？</a></li>
    <li><a href="#删除数据框中某一列中带有na的行">删除数据框中某一列中带有NA的行</a></li>
    <li><a href="#日期格式转换时遇到中文月份">日期格式转换时遇到中文月份</a></li>
    <li><a href="#geom_smooth还能这样玩">geom_smooth还能这样玩？</a></li>
    <li><a href="#抽取数据框的奇数行为另一数据框">抽取数据框的奇数行为另一数据框</a></li>
    <li><a href="#如何显示一个数据框中变量的缺失值">如何显示一个数据框中变量的缺失值</a></li>
    <li><a href="#矩阵分组求和">矩阵分组求和</a></li>
  </ul>
</nav>
                </div>
            </div>
            <div class="post-toc-mobile" id="post-toc-mobile">
                <details>
                    <summary><div class="post-toc-title"><span>目录</span><span><i class="details icon fas fa-angle-down"></i></span></div></summary>
                    <div class="post-toc-content">
                        
                        
                        <nav id="TableOfContentsMobile">
  <ul>
    <li><a href="#txt文件提取冒号后的数值">txt文件提取冒号后的数值</a></li>
    <li><a href="#提取每一行中的最大数值形成新的一行">提取每一行中的最大数值形成新的一行</a></li>
    <li><a href="#改进for循环">改进for循环</a></li>
    <li><a href="#把符合某项的纯字母多行挑出来">把符合某项的纯字母多行挑出来</a></li>
    <li><a href="#用lubridate包生成像seq函数一样的序列">用lubridate包生成像seq()函数一样的序列</a></li>
    <li><a href="#向量中某值与其相邻n个数的subset">向量中某值与其相邻n个数的subset</a></li>
    <li><a href="#字符和数字比大小">字符和数字比大小？</a></li>
    <li><a href="#删除数据框中某一列中带有na的行">删除数据框中某一列中带有NA的行</a></li>
    <li><a href="#日期格式转换时遇到中文月份">日期格式转换时遇到中文月份</a></li>
    <li><a href="#geom_smooth还能这样玩">geom_smooth还能这样玩？</a></li>
    <li><a href="#抽取数据框的奇数行为另一数据框">抽取数据框的奇数行为另一数据框</a></li>
    <li><a href="#如何显示一个数据框中变量的缺失值">如何显示一个数据框中变量的缺失值</a></li>
    <li><a href="#矩阵分组求和">矩阵分组求和</a></li>
  </ul>
</nav>
                    </div>
                </details>
            </div>

        <div class="post-content">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <p>从<a href="https://d.cosx.org/">统计之都</a>、<a href="https://stackoverflow.com/">SO</a>摘抄以及自己的备忘。
<img src="https://slidesplayer.com/slide/11292749/61/images/40/%E7%BB%9F%E8%AE%A1%E4%B9%8B%E9%83%BD+%E4%B8%BB%E7%AB%99%EF%BC%9A%E7%9C%8B%E7%9C%8B%E5%A4%A7%E5%AE%B6%E9%83%BD%E5%9C%A8%E7%A0%94%E7%A9%B6%E4%BB%80%E4%B9%88%EF%BC%9F+%E8%AE%BA%E5%9D%9B%EF%BC%9A%E4%BB%8A%E5%A4%A9%E7%9A%84%E8%AE%B2%E5%BA%A7%E6%B2%A1%E5%90%AC%E6%87%82%EF%BC%9F+%E7%BB%B4%E5%9F%BA%EF%BC%9A%E7%BB%9F%E8%AE%A1%E5%AD%A6%E7%99%BE%E7%A7%91%E5%85%A8%E4%B9%A6%EF%BC%9F+%E5%92%8C%E7%BB%9F%E8%AE%A1%E4%B9%8B%E9%83%BD%E7%9B%B8%E5%85%B3%E7%9A%84%EF%BC%9A+R%E8%AF%AD%E8%A8%80%E4%BC%9A%E8%AE%AE+%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E9%82%80%E8%AF%B7%E8%B5%9B.jpg" alt="Capital of Statistics"></p>
<a class="post-dummy-target" id="txt文件提取冒号后的数值"></a><h2>txt文件提取冒号后的数值</h2>
<p><a href="https://d.cosx.org/d/3004-3004">https://d.cosx.org/d/3004-3004</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">gsubfn</span><span class="p">)</span>
<span class="c1">#&gt; 载入需要的程辑包：proto</span>
<span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">1:2.000000&#34;</span>   <span class="p">,</span>    <span class="s">&#34;</span><span class="s">2:5.000000&#34;</span>   <span class="p">,</span>  <span class="s">&#34;</span><span class="s">13:155000000&#34;</span> <span class="p">)</span>
<span class="nf">gsubfn</span><span class="p">(</span><span class="s">&#34;</span><span class="s">([[:alnum:]])+(:)&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">&#34;</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
<span class="c1">#&gt; [1] &#34;2.000000&#34;  &#34;5.000000&#34;  &#34;155000000&#34;</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="提取每一行中的最大数值形成新的一行"></a><h2>提取每一行中的最大数值形成新的一行</h2>
<p><a href="https://d.cosx.org/d/420429-r">https://d.cosx.org/d/420429-r</a></p>
<p>附上apply函数族的介绍：http://blog.fens.me/r-apply/</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
<span class="c1">#&gt; </span>
<span class="c1">#&gt; 载入程辑包：&#39;dplyr&#39;</span>

<span class="n">df</span> <span class="o">=</span><span class="n">data.table</span><span class="o">::</span><span class="nf">fread</span><span class="p">(</span>
  <span class="s">&#34;</span><span class="s">
</span><span class="s">1 2 3
</span><span class="s">4 5 6
</span><span class="s">7 8 9
</span><span class="s">&#34;</span>
<span class="p">)</span>
<span class="n">df1</span> <span class="o">=</span> <span class="n">df</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">rowmax</span> <span class="o">=</span> <span class="nf">pmax</span><span class="p">(</span><span class="n">V1</span><span class="p">,</span><span class="n">V2</span><span class="p">,</span><span class="n">V3</span><span class="p">)</span><span class="p">)</span>

<span class="n">df1</span>
<span class="c1">#&gt;   V1 V2 V3 rowmax</span>
<span class="c1">#&gt; 1  1  2  3      3</span>
<span class="c1">#&gt; 2  4  5  6      6</span>
<span class="c1">#&gt; 3  7  8  9      9</span>

<span class="n">df2</span> <span class="o">=</span> <span class="n">df</span>
<span class="n">df2</span><span class="o">$</span><span class="n">rowmax</span> <span class="o">=</span> <span class="nf">apply</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="m">1</span><span class="p">,</span> <span class="n">max</span><span class="p">)</span>

<span class="n">df2</span>
<span class="c1">#&gt;    V1 V2 V3 rowmax</span>
<span class="c1">#&gt; 1:  1  2  3      3</span>
<span class="c1">#&gt; 2:  4  5  6      6</span>
<span class="c1">#&gt; 3:  7  8  9      9</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="改进for循环"></a><h2>改进for循环</h2>
<p><a href="https://d.cosx.org/d/420414-for">https://d.cosx.org/d/420414-for</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="n">y</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
<span class="n">z</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">9</span><span class="p">)</span>
<span class="nf">for</span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="n">x</span><span class="p">)</span><span class="p">{</span>
	<span class="nf">for</span><span class="p">(</span><span class="n">j</span> <span class="n">in</span> <span class="n">y</span><span class="p">)</span><span class="p">{</span>
		<span class="nf">for</span><span class="p">(</span><span class="n">k</span> <span class="n">in</span> <span class="n">z</span><span class="p">)</span><span class="p">{</span>
			<span class="n">sum</span> <span class="o">&lt;-</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="n">k</span>
			<span class="nf">print</span><span class="p">(</span><span class="n">sum</span><span class="p">)</span>
		<span class="p">}</span>

	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>改进，全排列：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>

<span class="nf">expand.grid</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">9</span><span class="p">)</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">dplyr</span><span class="o">::</span><span class="nf">mutate</span><span class="p">(</span><span class="n">sum</span> <span class="o">=</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">+</span><span class="n">z</span><span class="p">)</span>
<span class="c1">#&gt;    x y z sum</span>
<span class="c1">#&gt; 1  1 3 6  10</span>
<span class="c1">#&gt; 2  2 3 6  11</span>
<span class="c1">#&gt; 3  1 4 6  11</span>
<span class="c1">#&gt; 4  2 4 6  12</span>
<span class="c1">#&gt; 5  1 5 6  12</span>
<span class="c1">#&gt; 6  2 5 6  13</span>
<span class="c1">#&gt; 7  1 3 7  11</span>
<span class="c1">#&gt; 8  2 3 7  12</span>
<span class="c1">#&gt; 9  1 4 7  12</span>
<span class="c1">#&gt; 10 2 4 7  13</span>
<span class="c1">#&gt; 11 1 5 7  13</span>
<span class="c1">#&gt; 12 2 5 7  14</span>
<span class="c1">#&gt; 13 1 3 8  12</span>
<span class="c1">#&gt; 14 2 3 8  13</span>
<span class="c1">#&gt; 15 1 4 8  13</span>
<span class="c1">#&gt; 16 2 4 8  14</span>
<span class="c1">#&gt; 17 1 5 8  14</span>
<span class="c1">#&gt; 18 2 5 8  15</span>
<span class="c1">#&gt; 19 1 3 9  13</span>
<span class="c1">#&gt; 20 2 3 9  14</span>
<span class="c1">#&gt; 21 1 4 9  14</span>
<span class="c1">#&gt; 22 2 4 9  15</span>
<span class="c1">#&gt; 23 1 5 9  15</span>
<span class="c1">#&gt; 24 2 5 9  16</span>
</code></pre></td></tr></table>
</div>
</div><p>注意！这样会出错：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>

<span class="nf">expand.grid</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">9</span><span class="p">)</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">dplyr</span><span class="o">::</span><span class="nf">mutate</span><span class="p">(</span><span class="n">sum</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span><span class="p">)</span>
<span class="c1">#&gt;    x y z sum</span>
<span class="c1">#&gt; 1  1 3 6 312</span>
<span class="c1">#&gt; 2  2 3 6 312</span>
<span class="c1">#&gt; 3  1 4 6 312</span>
<span class="c1">#&gt; 4  2 4 6 312</span>
<span class="c1">#&gt; 5  1 5 6 312</span>
<span class="c1">#&gt; 6  2 5 6 312</span>
<span class="c1">#&gt; 7  1 3 7 312</span>
<span class="c1">#&gt; 8  2 3 7 312</span>
<span class="c1">#&gt; 9  1 4 7 312</span>
<span class="c1">#&gt; 10 2 4 7 312</span>
<span class="c1">#&gt; 11 1 5 7 312</span>
<span class="c1">#&gt; 12 2 5 7 312</span>
<span class="c1">#&gt; 13 1 3 8 312</span>
<span class="c1">#&gt; 14 2 3 8 312</span>
<span class="c1">#&gt; 15 1 4 8 312</span>
<span class="c1">#&gt; 16 2 4 8 312</span>
<span class="c1">#&gt; 17 1 5 8 312</span>
<span class="c1">#&gt; 18 2 5 8 312</span>
<span class="c1">#&gt; 19 1 3 9 312</span>
<span class="c1">#&gt; 20 2 3 9 312</span>
<span class="c1">#&gt; 21 1 4 9 312</span>
<span class="c1">#&gt; 22 2 4 9 312</span>
<span class="c1">#&gt; 23 1 5 9 312</span>
<span class="c1">#&gt; 24 2 5 9 312</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="把符合某项的纯字母多行挑出来"></a><h2>把符合某项的纯字母多行挑出来</h2>
<p><a href="https://d.cosx.org/d/420335-r">https://d.cosx.org/d/420335-r</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="n">v1</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">AABBCC&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">BBCCDD&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">DDEEFF&#34;</span><span class="p">)</span>
<span class="n">v2</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">ABCABC&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">DEFDEF&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">ABCDEF&#34;</span><span class="p">)</span>
<span class="n">ind1</span> <span class="o">=</span> <span class="nf">grepl</span><span class="p">(</span><span class="s">&#34;</span><span class="s">B|C&#34;</span><span class="p">,</span> <span class="n">v1</span><span class="p">)</span>
<span class="n">ind2</span> <span class="o">=</span> <span class="nf">grepl</span><span class="p">(</span><span class="s">&#34;</span><span class="s">B|C&#34;</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span>
<span class="n">ind</span> <span class="o">=</span> <span class="n">ind1</span> <span class="o">&amp;</span> <span class="n">ind2</span>
<span class="n">ind1</span>
<span class="c1">#&gt; [1]  TRUE  TRUE FALSE</span>
<span class="n">ind2</span>
<span class="c1">#&gt; [1]  TRUE FALSE  TRUE</span>
<span class="n">ind</span>
<span class="c1">#&gt; [1]  TRUE FALSE FALSE</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">data.table</span><span class="o">::</span><span class="nf">fread</span><span class="p">(</span>
<span class="s">&#34;</span><span class="s">| v1     | v2     | col3 | col4 |
</span><span class="s">| AABBCC | ABCABC |      |      |
</span><span class="s">| BBCCDD | DEFDEF |      |      |
</span><span class="s">| DDEEFF | ABCDEF |      |      |
</span><span class="s">| CCDDFF | DDEEFF |      |      |
</span><span class="s">| ABCABC | CCDDFF |      |      |
</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="bp">T</span>
<span class="p">)</span>

<span class="n">df</span><span class="o">$</span><span class="n">V1</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="nf">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="n">df</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="p">(</span><span class="n">v1</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">BBCCDD&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">DDEEFF&#34;</span><span class="p">)</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">v2</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">BBCCDD&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">DDEEFF&#34;</span><span class="p">)</span><span class="p">)</span><span class="p">)</span>
<span class="c1">#&gt;   V1     v1     v2 col3 col4 V6</span>
<span class="c1">#&gt; 1  2 BBCCDD DEFDEF   NA   NA NA</span>
<span class="c1">#&gt; 2  3 DDEEFF ABCDEF   NA   NA NA</span>
<span class="c1">#&gt; 3  4 CCDDFF DDEEFF   NA   NA NA</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="用lubridate包生成像seq函数一样的序列"></a><h2>用lubridate包生成像seq()函数一样的序列</h2>
<p><a href="https://d.cosx.org/d/420280-lubridate-seq">https://d.cosx.org/d/420280-lubridate-seq</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="n">train</span> <span class="o">&lt;-</span> <span class="n">data</span><span class="n">[data</span><span class="o">$</span><span class="n">ARRIVE_DATE</span> <span class="o">&lt;</span> <span class="nf">ymd</span><span class="p">(</span><span class="m">20181106</span><span class="p">)</span><span class="p">,</span><span class="n">]</span> <span class="c1">#可以直接这样筛选</span>
<span class="n">train</span> <span class="o">&lt;-</span> <span class="nf">filter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">data</span><span class="o">$</span><span class="n">ARRIVE_DATE</span> <span class="o">&lt;</span> <span class="nf">ymd</span><span class="p">(</span><span class="m">20181106</span><span class="p">)</span> <span class="c1">#也可以这样</span>

<span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>

<span class="n">raw</span> <span class="o">&lt;-</span> <span class="n">data.table</span><span class="o">::</span><span class="nf">fread</span><span class="p">(</span>
<span class="s">&#34;</span><span class="s">   T              Q     P    E0
</span><span class="s"> 1 1987-01-01  16.5   0.4  0.6 
</span><span class="s"> 2 1987-01-02  16.5   0    1.05
</span><span class="s"> 3 1987-01-03  16.1   0.2  1   
</span><span class="s"> 4 1987-01-04  15.6   0    1.25
</span><span class="s"> 5 1987-01-05  15.6   0    1.6 
</span><span class="s"> 6 1987-01-06  15.6   0    2.75
</span><span class="s"> 7 1987-01-07  15.6   0    2.6 
</span><span class="s"> 8 1987-01-08  14.9   0    2   
</span><span class="s"> 9 1987-01-09  14.8   0    2.5 
</span><span class="s">10 1987-01-10  14.8   0    2.05&#34;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">raw</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="bp">T</span> <span class="o">&gt;</span> <span class="n">lubridate</span><span class="o">::</span><span class="nf">ymd</span><span class="p">(</span><span class="m">19870102</span><span class="p">)</span><span class="p">,</span> <span class="bp">T</span> <span class="o">&lt;</span> <span class="n">lubridate</span><span class="o">::</span><span class="nf">ymd</span><span class="p">(</span><span class="m">19870107</span><span class="p">)</span><span class="p">)</span>
<span class="c1">#&gt;   V1          T    Q   P   E0</span>
<span class="c1">#&gt; 1  3 1987-01-03 16.1 0.2 1.00</span>
<span class="c1">#&gt; 2  4 1987-01-04 15.6 0.0 1.25</span>
<span class="c1">#&gt; 3  5 1987-01-05 15.6 0.0 1.60</span>
<span class="c1">#&gt; 4  6 1987-01-06 15.6 0.0 2.75</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="向量中某值与其相邻n个数的subset"></a><h2>向量中某值与其相邻n个数的subset</h2>
<p>SO: <a href="https://stackoverflow.com/questions/55507218/subset-adjacent-values-around-one-value">https://stackoverflow.com/questions/55507218/subset-adjacent-values-around-one-value</a></p>
<p>COSX: <a href="https://d.cosx.org/d/420569-3/4">https://d.cosx.org/d/420569-3/4</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="n">v</span> <span class="o">&lt;</span><span class="o">-</span> <span class="n">seq</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mf">.5</span><span class="p">)</span>
<span class="cp">#</span><span class="cp"> 1</span><span class="cp">
</span><span class="cp"></span><span class="n">v1</span> <span class="o">&lt;</span><span class="o">-</span> <span class="n">v</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">v</span> <span class="o">=</span><span class="o">=</span> <span class="mi">25</span><span class="p">)</span>  <span class="o">+</span>  <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">:</span><span class="mi">2</span><span class="p">)</span><span class="p">]</span>
<span class="n">embed</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="p">[</span><span class="p">,</span> <span class="mi">3</span><span class="o">:</span><span class="mi">1</span><span class="p">]</span>
<span class="cp">#</span><span class="cp"> embed(v1, 3)</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#</span><span class="cp"> 2</span><span class="cp">
</span><span class="cp"></span><span class="n">v</span><span class="p">[</span><span class="n">abs</span><span class="p">(</span><span class="n">v</span><span class="o">-</span><span class="mi">25</span><span class="p">)</span> <span class="o">&lt;</span><span class="o">=</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">embed</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    
<span class="cp">#</span><span class="cp"> 3</span><span class="cp">
</span><span class="cp"></span><span class="n">n</span> <span class="o">&lt;</span><span class="o">-</span> <span class="mi">3</span>
<span class="n">v</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="mi">0</span> <span class="o">+</span> <span class="n">rep</span><span class="p">(</span><span class="n">seq_len</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">each</span><span class="o">=</span><span class="n">n</span><span class="p">)</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="字符和数字比大小"></a><h2>字符和数字比大小？</h2>
<p><a href="https://d.cosx.org/d/420566/2">https://d.cosx.org/d/420566/2</a></p>
<p>见<code>?“&lt;”</code>。</p>
<ol>
<li>如果是不同的数据类型进行比较，R会自动把数字类型转化为字符。</li>
</ol>
<blockquote>
<p>If the two arguments are atomic vectors of different types, one is coerced to the type of the other, the (decreasing) order of precedence being character, complex, numeric, integer, logical and raw.</p>
</blockquote>
<ol start="2">
<li>如果是字符之间的比较，R 会先转化为 <code>UTF-8</code> 然后再比较。</li>
</ol>
<blockquote>
<p>Character strings can be compared with different marked encodings (see Encoding): they are translated to UTF-8 before comparison.
Raw vectors should not really be considered to have an order, but the numeric order of the byte representation is used.</p>
</blockquote>
<a class="post-dummy-target" id="删除数据框中某一列中带有na的行"></a><h2>删除数据框中某一列中带有NA的行</h2>
<p><a href="https://d.cosx.org/d/420558-na">https://d.cosx.org/d/420558-na</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#</span><span class="cp"> 1</span><span class="cp">
</span><span class="cp"></span><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>

<span class="n">tb</span> <span class="o">&lt;</span><span class="o">-</span> <span class="n">tribble</span><span class="p">(</span>
  <span class="o">~</span><span class="n">a</span><span class="p">,</span> <span class="o">~</span><span class="n">b</span><span class="p">,</span> <span class="o">~</span><span class="n">c</span><span class="p">,</span> <span class="o">~</span><span class="n">d</span><span class="p">,</span> <span class="o">~</span><span class="n">e</span><span class="p">,</span>
  <span class="n">NA</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">NA</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
  <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">NA</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span>
  <span class="mi">3</span><span class="p">,</span> <span class="n">NA</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">NA</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span>
  <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NA</span><span class="p">,</span>
  <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">NA</span><span class="p">,</span>
  <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span>
<span class="p">)</span> <span class="o">%</span><span class="o">&gt;</span><span class="o">%</span>
  <span class="n">dplyr</span><span class="o">:</span><span class="o">:</span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="n">is</span><span class="p">.</span><span class="n">na</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="p">)</span>

<span class="n">tb</span>
<span class="cp">#</span><span class="cp">&gt; # A tibble: 5 x 5</span><span class="cp">
</span><span class="cp"></span><span class="cp">#</span><span class="cp">&gt;       a     b     c     d     e</span><span class="cp">
</span><span class="cp"></span><span class="cp">#</span><span class="cp">&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span><span class="cp">
</span><span class="cp"></span><span class="cp">#</span><span class="cp">&gt; 1     2     8    NA    10     6</span><span class="cp">
</span><span class="cp"></span><span class="cp">#</span><span class="cp">&gt; 2     3    NA     5    NA     7</span><span class="cp">
</span><span class="cp"></span><span class="cp">#</span><span class="cp">&gt; 3     4    10     6     2    NA</span><span class="cp">
</span><span class="cp"></span><span class="cp">#</span><span class="cp">&gt; 4     5     1     7     3    NA</span><span class="cp">
</span><span class="cp"></span><span class="cp">#</span><span class="cp">&gt; 5     6     2     8     4    10</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#</span><span class="cp"> 2</span><span class="cp">
</span><span class="cp"></span><span class="n">airquality</span>
<span class="n">airquality</span><span class="p">[</span><span class="o">!</span><span class="n">is</span><span class="p">.</span><span class="n">na</span><span class="p">(</span><span class="n">airquality</span><span class="err">$</span><span class="n">Ozone</span><span class="p">)</span><span class="p">,</span><span class="p">]</span>

<span class="cp">#</span><span class="cp"> 3</span><span class="cp">
</span><span class="cp"></span><span class="n">tb</span><span class="o">%</span><span class="o">&gt;</span><span class="o">%</span> <span class="n">drop_na</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
      
<span class="cp">#</span><span class="cp"> 4</span><span class="cp">
</span><span class="cp"></span><span class="n">tb_df</span><span class="o">=</span><span class="n">data</span><span class="p">.</span><span class="n">frame</span><span class="p">(</span><span class="n">tb</span><span class="p">)</span>
<span class="n">tb_df_narm</span><span class="o">=</span><span class="n">subset</span><span class="p">(</span><span class="n">tb_df</span><span class="p">,</span> <span class="o">!</span><span class="n">is</span><span class="p">.</span><span class="n">na</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>另外也有人提到：</p>
<blockquote>
<p>如果是需要计算 a 列的某些统计量，你可以用 <code>na.rm = TRUE</code> 来避免 NA 造成麻烦，比如 <code>mean(tb$a, na.rm = TRUE)</code>。如果你需要获取每个变量的每个测量值都完整的行，则可以用 <code>tb[complete.cases(tb), ]</code>。</p>
</blockquote>
<a class="post-dummy-target" id="日期格式转换时遇到中文月份"></a><h2>日期格式转换时遇到中文月份</h2>
<p><a href="https://d.cosx.org/d/149607-149607">https://d.cosx.org/d/149607-149607</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="o">&gt;</span> <span class="nf">sessionInfo</span><span class="p">(</span><span class="p">)</span>
<span class="n">R</span> <span class="n">version</span> <span class="m">3.5</span><span class="m">.3</span> <span class="p">(</span><span class="m">2019</span><span class="m">-03</span><span class="m">-11</span><span class="p">)</span>
<span class="n">Platform</span><span class="o">:</span> <span class="n">x86_64</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">mingw32</span><span class="o">/</span><span class="nf">x64 </span><span class="p">(</span><span class="m">64</span><span class="o">-</span><span class="n">bit</span><span class="p">)</span>
<span class="n">Running</span> <span class="n">under</span><span class="o">:</span> <span class="n">Windows</span> <span class="o">&gt;=</span> <span class="m">8</span> <span class="nf">x64 </span><span class="p">(</span><span class="n">build</span> <span class="m">9200</span><span class="p">)</span>

<span class="n">Matrix</span> <span class="n">products</span><span class="o">:</span> <span class="n">default</span>

<span class="n">locale</span><span class="o">:</span>
<span class="n">[1</span><span class="n">]</span> <span class="n">LC_COLLATE</span><span class="o">=</span><span class="nf">Chinese </span><span class="p">(</span><span class="n">Simplified</span><span class="p">)</span><span class="n">_China.936</span>  <span class="n">LC_CTYPE</span><span class="o">=</span><span class="nf">Chinese </span><span class="p">(</span><span class="n">Simplified</span><span class="p">)</span><span class="n">_China.936</span>   
<span class="n">[3</span><span class="n">]</span> <span class="n">LC_MONETARY</span><span class="o">=</span><span class="nf">Chinese </span><span class="p">(</span><span class="n">Simplified</span><span class="p">)</span><span class="n">_China.936</span> <span class="n">LC_NUMERIC</span><span class="o">=</span><span class="n">C</span>                              
<span class="n">[5</span><span class="n">]</span> <span class="n">LC_TIME</span><span class="o">=</span><span class="nf">Chinese </span><span class="p">(</span><span class="n">Simplified</span><span class="p">)</span><span class="n">_China.936</span>    
<span class="kc">...</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">Sys.setlocale</span><span class="p">(</span><span class="s">&#34;</span><span class="s">LC_TIME&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">English&#34;</span><span class="p">)</span>
<span class="nf">as.Date</span><span class="p">(</span><span class="s">&#34;</span><span class="s">2005-Sep-01&#34;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#34;</span><span class="s">%Y-%b-%d&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="geom_smooth还能这样玩"></a><h2><code>geom_smooth</code>还能这样玩？</h2>
<p><a href="https://d.cosx.org/d/420602-ggplot2-spline-excel/5">https://d.cosx.org/d/420602-ggplot2-spline-excel/5</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="n">myspline</span> <span class="o">=</span> <span class="nf">function</span><span class="p">(</span><span class="n">formula</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="kc">...</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">dat</span> <span class="o">=</span> <span class="nf">model.frame</span><span class="p">(</span><span class="n">formula</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="nf">splinefun</span><span class="p">(</span><span class="n">dat</span><span class="n">[</span><span class="n">[2</span><span class="n">]</span><span class="n">]</span><span class="p">,</span> <span class="n">dat</span><span class="n">[</span><span class="n">[1</span><span class="n">]</span><span class="n">]</span><span class="p">)</span>
    <span class="nf">class</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">=</span> <span class="s">&#34;</span><span class="s">myspline&#34;</span>
    <span class="n">res</span>
<span class="p">}</span>

<span class="n">predict.myspline</span> <span class="o">=</span> <span class="nf">function</span><span class="p">(</span><span class="n">object</span><span class="p">,</span> <span class="n">newdata</span><span class="p">,</span> <span class="kc">...</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">object</span><span class="p">(</span><span class="n">newdata</span><span class="n">[</span><span class="n">[1</span><span class="n">]</span><span class="n">]</span><span class="p">)</span>
<span class="p">}</span>


<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>
<span class="nf">set.seed</span><span class="p">(</span><span class="m">123</span><span class="p">)</span>
<span class="n">dat</span> <span class="o">=</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">xx</span> <span class="o">=</span> <span class="nf">runif</span><span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="m">-5</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span><span class="p">)</span>
<span class="n">dat</span><span class="o">$</span><span class="n">yy</span> <span class="o">=</span> <span class="nf">sin</span><span class="p">(</span><span class="n">dat</span><span class="o">$</span><span class="n">xx</span><span class="p">)</span>

<span class="nf">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">xx</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">yy</span><span class="p">)</span><span class="p">)</span> <span class="o">+</span>
    <span class="nf">geom_point</span><span class="p">(</span><span class="p">)</span> <span class="o">+</span>
    <span class="nf">geom_smooth</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="n">myspline</span><span class="p">,</span> <span class="n">se</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="抽取数据框的奇数行为另一数据框"></a><h2>抽取数据框的奇数行为另一数据框</h2>
<p><a href="https://d.cosx.org/d/107793-107793/2">https://d.cosx.org/d/107793-107793/2</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="c1"># 可以用序列索引</span>
<span class="nf">seq</span><span class="p">(</span><span class="n">from</span><span class="o">=</span><span class="m">1</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="nf">nrow</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>

<span class="c1"># 掌声在哪里？</span>
<span class="n">mtcars</span><span class="nf">[</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="nf">nrow</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span><span class="p">)</span><span class="o">%%</span><span class="m">2</span><span class="o">==</span><span class="m">1</span><span class="p">,</span><span class="n">]</span>

<span class="n">mtcars</span><span class="nf">[c</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">,</span> <span class="kc">FALSE</span><span class="p">)</span><span class="p">,</span> <span class="n">]</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="如何显示一个数据框中变量的缺失值"></a><h2>如何显示一个数据框中变量的缺失值</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="o">&gt;</span> <span class="n">inspectdf</span><span class="o">::</span><span class="nf">inspect_na</span><span class="p">(</span><span class="n">airquality</span><span class="p">,</span> <span class="n">show_plot</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="n">The</span> <span class="n">`show_plot = TRUE`</span> <span class="n">is</span> <span class="n">deprecated</span> <span class="n">and</span> <span class="n">will</span> <span class="n">be</span> <span class="n">removed</span> <span class="n">in</span> <span class="n">a</span> <span class="n">future</span> <span class="n">version.</span>  <span class="n">The</span> <span class="nf">`show_plot</span><span class="p">(</span><span class="p">)</span><span class="n">`</span> <span class="n">function</span> <span class="n">should</span> <span class="n">be</span> <span class="n">used</span> <span class="n">instead.</span>  <span class="n">For</span> <span class="n">more</span> <span class="n">info</span><span class="p">,</span> <span class="n">check</span> <span class="n">out</span> <span class="n">the</span> <span class="n">help</span> <span class="n">file</span> <span class="o">?</span><span class="nf">show_plot</span><span class="p">(</span><span class="p">)</span>
<span class="c1"># A tibble: 6 x 3</span>
  <span class="n">col_name</span>   <span class="n">cnt</span>  <span class="n">pcnt</span>
  <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>
<span class="m">1</span> <span class="n">Ozone</span>       <span class="m">37</span> <span class="m">24.2</span> 
<span class="m">2</span> <span class="n">Solar.R</span>      <span class="m">7</span>  <span class="m">4.58</span>
<span class="m">3</span> <span class="n">Wind</span>         <span class="m">0</span>  <span class="m">0</span>   
<span class="m">4</span> <span class="n">Temp</span>         <span class="m">0</span>  <span class="m">0</span>   
<span class="m">5</span> <span class="n">Month</span>        <span class="m">0</span>  <span class="m">0</span>   
<span class="m">6</span> <span class="n">Day</span>          <span class="m">0</span>  <span class="m">0</span>   
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">&gt; table(airquality$Ozone, useNA = &#39;ifany&#39;)

   1    4    6    7    8    9   10   11   12   13   14   16   18   19   20   21   22   23   24   27   28   29 
   1    1    1    3    1    3    1    3    2    4    4    4    4    1    4    4    1    6    2    1    3    1 
  30   31   32   34   35   36   37   39   40   41   44   45   46   47   48   49   50   52   59   61   63   64 
   2    1    3    1    2    2    2    2    1    1    3    2    1    1    1    1    1    1    2    1    1    2 
  65   66   71   73   76   77   78   79   80   82   84   85   89   91   96   97  108  110  115  118  122  135 
   1    1    1    2    1    1    2    1    1    1    1    2    1    1    1    2    1    1    1    1    1    1 
 168 &lt;NA&gt; 
   1   37 
</code></pre></td></tr></table>
</div>
</div><p>不过<code>vis_miss(airquality)</code>只能显示比例和图像，更加可视化了些。</p>
<a class="post-dummy-target" id="矩阵分组求和"></a><h2>矩阵分组求和</h2>
<p><a href="https://d.cosx.org/d/420730">https://d.cosx.org/d/420730</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="n">tmp</span> <span class="o">&lt;-</span> <span class="nf">matrix</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span> <span class="m">12</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">2</span><span class="p">)</span>
<span class="nf">rownames</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">A&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">B&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">B&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">B&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">C&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">A&#34;</span><span class="p">)</span>

<span class="nf">rowsum</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="nf">row.names</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span><span class="p">)</span>
<span class="c1">#&gt;   [,1] [,2]</span>
<span class="c1">#&gt; A   11   11</span>
<span class="c1">#&gt; B   12   13</span>
<span class="c1">#&gt; C    9   10</span>

<span class="n">tmp</span> <span class="o">%&gt;%</span>
  <span class="nf">as_tibble</span><span class="p">(</span><span class="n">rownames</span> <span class="o">=</span> <span class="s">&#34;</span><span class="s">grp&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">grp</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">summarise_all</span><span class="p">(</span><span class="n">sum</span><span class="p">)</span>
<span class="c1">#&gt; Warning: `as_tibble.matrix()` requires a matrix with column names or a `.name_repair` argument. Using compatibility `.name_repair`.</span>
<span class="c1">#&gt; This warning is displayed once per session.</span>
<span class="c1">#&gt; # A tibble: 3 x 3</span>
<span class="c1">#&gt;   grp      V1    V2</span>
<span class="c1">#&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="c1">#&gt; 1 A        11    11</span>
<span class="c1">#&gt; 2 B        12    13</span>
<span class="c1">#&gt; 3 C         9    10</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted -->Created on 2019-06-10 by the <a href="https://reprex.tidyverse.org">reprex package</a> (v0.3.0)<!-- raw HTML omitted --></p>
        </div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>本文于 2020-01-10 更新</span>
            </div>
            <div class="post-info-license">
                
            </div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md">
                
                    
                        <span><a class="link-to-markdown" href="/2019/02/2019-02-12-r-knowledge-points/index.md" target="_blank">阅读原始文档</a></span>
                    
                
            </div>
            <div class="post-info-share">
                
                    <span></span>
                
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section>
            
                
                    <span class="tag">
                        <a href="/tags/r/"><i class="fas fa-tag fa-fw"></i>R</a>
                    </span>
                
                    <span class="tag">
                        <a href="/tags/rmarkdown/"><i class="fas fa-tag fa-fw"></i>RMarkdown</a>
                    </span>
                
            
        </section>
        <section>
            <span><a href="javascript:window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav">
        
            <a href="/2019/01/2019-01-05-ggplot2/" class="prev" rel="prev" title="ggplot2"><i class="fas fa-angle-left fa-fw"></i>ggplot2</a>
        
        
            <a href="/2019/04/2019-04-08-settings-in-word/" class="next" rel="next" title="Word设置汇总">Word设置汇总<i class="fas fa-angle-right fa-fw"></i></a>
        
    </div>
</div>

        <div class="post-comment">
            
            

            
        </div>
    </article></div>
            </main>
            <footer class="footer">
    <div class="copyright">
        <div class="copyright-line">
            由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a>
        </div>
        <div class="copyright-line">
            <i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/">hoas</a></span><span class="license">&nbsp;|&nbsp;<a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
    </div>
    <script>
        (function(u, c) {
         var d = document, t = 'script', o = d.createElement(t),
              s = d.getElementsByTagName(t)[0];
         o.src = u;
         if (c) { o.addEventListener('load', function(e) { c(e); }); }
         s.parentNode.insertBefore(o, s);
        })('//cdn.bootcss.com/pangu/3.3.0/pangu.min.js', function() {
            pangu.spacingPage();
            
        });
    </script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
</footer>


    
    




    
    




    
    





    
    



    
    



    
    





    
    





    
    



    
    





    
    




    
    




    
    



    
    





    
    


<script src="/js/lib/jquery/jquery.slim.min.min.js"></script>
<script src="/js/lib/lazysizes/lazysizes.min.min.js"></script>
<script src="/js/lib/smooth-scroll/smooth-scroll.polyfills.min.min.js"></script><script>window.scroll = new SmoothScroll('[data-scroll]', {speed: 300, speedAsDuration: true});</script>


    
    

    

    

    

    






<script src="/js/blog.min.js"></script>


    
</div>
        <a href="#" class="dynamic-to-top" id="dynamic-to-top" data-scroll><span>&nbsp;</span></a>
    </body>
</html>